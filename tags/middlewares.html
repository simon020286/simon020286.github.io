<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try{var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem("theme");if(e){d.add(e)}else{d.add('dark');}}catch(t){}}();</script><title>T-Dev - Website - T-Dev</title><meta content="Sleep Deprived Father. Senior Web Developer." name="description"/><meta property="og:url" content="https://simon020286.github.io/tags/middlewares"/><link rel="canonical" href="https://simon020286.github.io/tags/middlewares"/><meta property="og:type" content="website"/><meta property="og:site_name" content="T-Dev - Website"/><meta property="og:description" content="Sleep Deprived Father. Senior Web Developer."/><meta property="og:title" content="T-Dev - Website"/><meta property="og:image" content="https://simon020286.github.io/images/site-preview.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@huntarosan"/><meta name="twitter:title" content="T-Dev - Website"/><meta name="twitter:description" content="Sleep Deprived Father. Senior Web Developer."/><meta name="twitter:image" content="https://simon020286.github.io/images/site-preview.png"/><meta name="next-head-count" content="17"/><link rel="preload" href="./_next/static/css/c5987b51c198f1d093cc.css" as="style"/><link rel="stylesheet" href="./_next/static/css/c5987b51c198f1d093cc.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="./_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="./_next/static/chunks/webpack-1856074edfcdd1518f76.js" defer=""></script><script src="./_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="./_next/static/chunks/main-1f2c591c5d3bfcfc95e6.js" defer=""></script><script src="./_next/static/chunks/pages/_app-a14dd6af74b8559dafb5.js" defer=""></script><script src="./_next/static/chunks/838-292b52a783d0bfb7b58f.js" defer=""></script><script src="./_next/static/chunks/384-52a5c121222f81fe3d13.js" defer=""></script><script src="./_next/static/chunks/pages/tags/%5Btag%5D-67432719c797171990b7.js" defer=""></script><script src="./_next/static/BheVO5P6tef8TcrsPuFIz/_buildManifest.js" defer=""></script><script src="./_next/static/BheVO5P6tef8TcrsPuFIz/_ssgManifest.js" defer=""></script><style id="__jsx-1084485634">html,body,body>div:first-child,div#__next,div#__next>div{height:100%;}</style></head><body class="bg-white dark:bg-black text-gray-900 dark:text-white"><div id="__next"><div class="flex flex-col min-h-screen"><header><div class="max-w-5xl px-8 mx-auto"><div class="flex items-center justify-between py-6"><nav><a class="text-gray-900 dark:text-white pr-6 py-4" href="/">Home</a><a class="text-gray-900 dark:text-white px-6 py-4" href="/tags">Tags</a></nav></div></div></header><main class="mb-0 flex-grow"><div class="max-w-5xl px-8 py-4 mx-auto"><h1></h1><article class="mt-12"><p class="mb-1 text-sm text-gray-500 dark:text-gray-400">November 12, 2020</p><h1 class="mb-2 text-xl"><a class="text-gray-900 dark:text-white dark:hover:text-blue-400" href="/posts/2020-11-12-traefik-middlewares">Traefik - Middlewares</a></h1><div><div class="flex space-x-1"><span class="text-gray-500 dark:text-gray-400">self-hosted</span><span class="text-gray-500 dark:text-gray-400">traefik</span><span class="text-gray-500 dark:text-gray-400">middlewares</span></div></div><p class="mb-3">Creare i meddlewares base per Traefik</p><p><a href="/posts/2020-11-12-traefik-middlewares">Read More</a></p></article></div></main><footer class="py-8"><div class="max-w-5xl px-8 mx-auto">Built by T-Dev</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"slug":"2020-11-12-traefik-middlewares","title":"Traefik - Middlewares","date":"2020-11-12T14:44:54.748Z","description":"Creare i meddlewares base per Traefik","image":null,"tags":["self-hosted","traefik","middlewares"],"content":"\nBuongiorno a tutti,  \noggi vedremo come creare i primi e più semplici middlewares per Traefik.  \nCosa è un middleware?  \nSemplificando molto è qualcosa che si frappone tra la chiamata e il servizio finale o viceversa.\n\n![middlwares](https://doc.traefik.io/traefik/assets/img/middleware/overview.png 'Esempio middlewares Traefik')\n\nNella mia configurazione ho creato tre middlewares che trovo molto utili. Per crearli basta creare un file all'interno della cartella dynamic vista nel primo articolo dedicato a Traefik ([lo trovate qui](/posts/2020-11-04-traefik-intro/)).  \nE' anche possibile crearli tramite label dei container, utile se è specifico per un determinato servizio.\n\n1. Redirect to https, abbastanza semplice da capire, effettua il redirect delle chiamate verso lo schema specificato. Nel mio caso tutte verso https.\n\n   ```yaml\n   ---\n   http:\n     middlewares:\n       redirect-to-https:\n         redirectScheme:\n           scheme: https\n   ```\n\n2. Basic auth, utile per redendere un po' più sicuro un endpoint aggiungendo un'autenticazione.  \n   E' possibile specificare l'elenco di coppie username: password, la password deve essere criptata tramite MD5, SHA1, o BCrypt, per fare questo è possibile utilizzare su sistemi Linux `htpasswd`. E' anche possibile specificare il path di un file contenente gli utenti, sempre nello stesso formato, tramite l'attributo `usersFile `al posto di `users`.\n\n   ```yaml\n   ---\n   http:\n     middlewares:\n       basic-auth:\n         basicAuth:\n           users:\n             - '\u003cusername\u003e:\u003cpassword\u003e'\n   ```\n\n3. Compressione della risposta, credo sia uno dei più importanti per limitare il consumo di banda. Comprime le risposte limitando appunto i dati scambiati.\n\n   ```yaml\n   ---\n   http:\n     middlewares:\n       gzip-compress:\n         compress: {}\n   ```\n\nPer utilizzare un middleware basta specificarlo nella configurazione della route.\n\n```yaml\n# Se utilizzate un file come impostazione.\nhttp:\n  routers:\n    nome-route:\n      middlewares:\n        - gzip-compress\n        - redirect-to-https\n\n# Se utilizzate le labels di un container come impostazione.\ntraefik.http.routers.nome-route.middlewares: gzip-compress@file, redirect-to-https@file\n```\n\nSpero di esservi stato utile e rimango sempre a disposizione per aiutarvi.\n"}],"slug":null,"_superjson":{"values":{"posts.0.date":["Date"],"posts.0.image":["undefined"],"slug":["undefined"]}}},"__N_SSG":true},"page":"/tags/[tag]","query":{"tag":"middlewares"},"buildId":"BheVO5P6tef8TcrsPuFIz","assetPrefix":".","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>