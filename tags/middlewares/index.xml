<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Middlewares on T-Dev</title><link>https://simon020286.github.io/tags/middlewares/</link><description>Recent content in Middlewares on T-Dev</description><generator>Hugo -- gohugo.io</generator><language>it-IT</language><lastBuildDate>Thu, 12 Nov 2020 14:44:54 +0000</lastBuildDate><atom:link href="https://simon020286.github.io/tags/middlewares/index.xml" rel="self" type="application/rss+xml"/><item><title>Traefik - Middlewares</title><link>https://simon020286.github.io/posts/2020-11-12-traefik-middlewares/</link><pubDate>Thu, 12 Nov 2020 14:44:54 +0000</pubDate><guid>https://simon020286.github.io/posts/2020-11-12-traefik-middlewares/</guid><description>Buongiorno a tutti,
oggi vedremo come creare i primi e più semplici middlewares per Traefik.
Cosa è un middleware?
Semplificando molto è qualcosa che si frappone tra la chiamata e il servizio finale o viceversa.
Nella mia configurazione ho creato tre middlewares che trovo molto utili. Per crearli basta creare un file all&amp;rsquo;interno della cartella dynamic vista nel primo articolo dedicato a Traefik (lo trovate qui).
E' anche possibile crearli tramite label dei container, utile se è specifico per un determinato servizio.</description><content>&lt;p>Buongiorno a tutti,&lt;br>
oggi vedremo come creare i primi e più semplici middlewares per Traefik.&lt;br>
Cosa è un middleware?&lt;br>
Semplificando molto è qualcosa che si frappone tra la chiamata e il servizio finale o viceversa.&lt;/p>
&lt;p>&lt;img src="https://doc.traefik.io/traefik/assets/img/middleware/overview.png" alt="middlwares" title="Esempio middlewares Traefik">&lt;/p>
&lt;p>Nella mia configurazione ho creato tre middlewares che trovo molto utili. Per crearli basta creare un file all&amp;rsquo;interno della cartella dynamic vista nel primo articolo dedicato a Traefik (&lt;a href="https://simon020286.github.io/posts/2020-11-04-traefik-intro/">lo trovate qui&lt;/a>).&lt;br>
E' anche possibile crearli tramite label dei container, utile se è specifico per un determinato servizio.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Redirect to https, abbastanza semplice da capire, effettua il redirect delle chiamate verso lo schema specificato. Nel mio caso tutte verso https.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">---
&lt;span style="color:#f92672">http&lt;/span>:
&lt;span style="color:#f92672">middlewares&lt;/span>:
&lt;span style="color:#f92672">redirect-to-https&lt;/span>:
&lt;span style="color:#f92672">redirectScheme&lt;/span>:
&lt;span style="color:#f92672">scheme&lt;/span>: &lt;span style="color:#ae81ff">https&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Basic auth, utile per redendere un po' più sicuro un endpoint aggiungendo un&amp;rsquo;autenticazione.&lt;br>
E' possibile specificare l&amp;rsquo;elenco di coppie username: password, la password deve essere criptata tramite MD5, SHA1, o BCrypt, per fare questo è possibile utilizzare su sistemi Linux &lt;code>htpasswd&lt;/code>. E' anche possibile specificare il path di un file contenente gli utenti, sempre nello stesso formato, tramite l&amp;rsquo;attributo &lt;code>usersFile &lt;/code>al posto di &lt;code>users&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">---
&lt;span style="color:#f92672">http&lt;/span>:
&lt;span style="color:#f92672">middlewares&lt;/span>:
&lt;span style="color:#f92672">basic-auth&lt;/span>:
&lt;span style="color:#f92672">basicAuth&lt;/span>:
&lt;span style="color:#f92672">users&lt;/span>:
- &lt;span style="color:#e6db74">&amp;#34;&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Compressione della risposta, credo sia uno dei più importanti per limitare il consumo di banda. Comprime le risposte limitando appunto i dati scambiati.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">---
&lt;span style="color:#f92672">http&lt;/span>:
&lt;span style="color:#f92672">middlewares&lt;/span>:
&lt;span style="color:#f92672">gzip-compress&lt;/span>:
&lt;span style="color:#f92672">compress&lt;/span>: {}
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>Per utilizzare un middleware basta specificarlo nella configurazione della route.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#75715e"># Se utilizzate un file come impostazione.&lt;/span>
&lt;span style="color:#f92672">http&lt;/span>:
&lt;span style="color:#f92672">routers&lt;/span>:
&lt;span style="color:#f92672">nome-route&lt;/span>:
&lt;span style="color:#f92672">middlewares&lt;/span>:
- &lt;span style="color:#ae81ff">gzip-compress&lt;/span>
- &lt;span style="color:#ae81ff">redirect-to-https&lt;/span>
&lt;span style="color:#75715e"># Se utilizzate le labels di un container come impostazione.&lt;/span>
&lt;span style="color:#f92672">traefik.http.routers.nome-route.middlewares&lt;/span>: &lt;span style="color:#ae81ff">gzip-compress@file, redirect-to-https@file&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Spero di esservi stato utile e rimango sempre a disposizione per aiutarvi.&lt;/p></content></item></channel></rss>